<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <meta http-equiv="Access-Control-Allow-Origin" content="*">

    <!-- Head Libs -->
<!--    <script src="../static/jquery-3.5.1.js" th:src="@{jquery-3.5.1.js}" ></script>-->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script type="text/javascript">
        // 测试引用是否成功
        $(document).ready(function(e) {
            alert('jquery 添加成功!');
        });
    </script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9f83e84bcaacc1ea8f1328cf761a4184";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body>
<h1>HOME 02</h1>

<div class="weui-cells weui-cells_form">
    <div class="weui-cell weui-cell_active" style="float: left; ">
        <label>站点列表请求</label>
        <div class="weui-cell__bd">
            <textarea id="siteListTxtRequest" class="weui-textarea" style="width: 500px;" placeholder="请输入文本" rows="30">{
    "header" : {
        "username": "lalalavov",
        "password": "Lina8899@",
        "token": "9f83e84bcaacc1ea8f1328cf761a4184",
        "account_type": 1
        }
}</textarea>
        </div>
    </div>

    <div class="weui-cell weui-cell_active" style="float: right;">
        <label>站点列表响应</label>
        <div class="weui-cell__bd">
            <textarea id="siteListTxtResponse" class="weui-textarea" style="width: 500px;" placeholder="请输入文本" rows="30"></textarea>
        </div>
    </div>

    <div class="button-sp-area">
        <button class="weui-btn weui-btn_mini weui-btn_primary" onclick="siteList()">网站列表</button>
    </div>

</div>

<script>
    // 账户回调
    function siteList() {
        var url = 'https://api.baidu.com/json/tongji/v1/ReportService/getSiteList';
        var data = $("#siteListTxtRequest").val();
        console.log(data);
        $.ajax({
            url: url,
            type: 'POST',
            timeout: 6000,
            data: data,
            dataType:'JSONP',
            error: function (result) {
                console.log(result);
                alert("请求失败");
            },
            success: function (result) {
                console.log(result);
                $('#siteListTxtResponse').val(result);
            }
        });
    }
</script>

</body>
</html>
