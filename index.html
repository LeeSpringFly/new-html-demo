<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>TITLE</title>

    <!-- Head Libs -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="../static/jquery-3.5.1.js" />

    <style>
        .div-a{ float:left;width:49%;}
        .div-b{ float:right;width:49%;}
        .div-center{ text-align: center}
    </style>

    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9f83e84bcaacc1ea8f1328cf761a4184";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body>
<h1>百度统计demo v1.0</h1>

<div class="weui-cells weui-cells_form">
    <div class="weui-cell weui-cell_active">
        <label>站点列表请求</label>
        <div class="weui-cell__bd">
            <input id="jsIn" />
        </div>
    </div>
</div>

<div>
    <div class="div-a">
        <label>网站列表请求</label>
        <textarea id="siteListTxtRequest" class="weui-textarea" style="width: 95%" placeholder="请输入文本" rows="30">{
            "header" : {
            "Access-Control-Allow-Origin": "*",
                "username": "lalalavov",
                "password": "Lina8899@",
                "token": "e80966a7f4dd92f75bcf1bcbb53f8e77",
                "account_type": 1
                }
        }</textarea>
    </div>
    <div class="div-b">
        <label>网站列表响应</label>
        <textarea id="siteListTxtResponse" class="weui-textarea" style="width: 95%" placeholder="请输入文本" rows="30"></textarea>
    </div>

    <div class="div-center">
        <button class="weui-btn weui-btn_mini weui-btn_primary" onclick="siteList()">网站列表</button>
    </div>
</div>



<script>
    // 账户回调
    function siteList() {
        var url = 'https://api.baidu.com/json/tongji/v1/ReportService/getSiteList';
        var data = $("#siteListTxtRequest").val();
        console.log(typeof data);
        var jsonData = JSON.parse(data);
        console.log(typeof jsonData);
        console.log(jsonData);
        // $.post(url, jsonData, function (result){
        //         console.log(result);
        //         $('#siteListTxtResponse').val(result);
        //     },
        //     'JSON'
        // )
        $.ajax({
            url: encodeURI(url),
            method: 'POST',
            timeout: 6000,
            async:false,
            data: jsonData,
            dataType:'JSON',
            error: function (result) {
                console.log(result);
                alert("请求失败");
            },
            success: function (result) {
                console.log(result);
                $('#siteListTxtResponse').val(result);
            }
        });
    }

    // 测试引用是否成功-->
    $(document).ready(function(e) {
        $('#jsIn').val('jquery 引用成功');
    });
</script>

</body>
</html>
